<!-- 
Licensed by AT&T under 'Software Development Kit Tools Agreement.' 2012
TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION: http://developer.att.com/sdk_agreement/
Copyright 2012 AT&T Intellectual Property. All rights reserved. http://developer.att.com
For more information contact developer.support@att.com
-->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">

<head>
    <title>AT&amp;T Sample Advertisement Application - Get Advertisement Application
    </title>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
    <link rel="stylesheet" type="text/css" href="style/common.css" />
</head>

<body>
    <div id="container">
        <!-- open HEADER -->
        <div id="header">
            <div>
                <div class="hcRight">
                    <%= Time.now.utc.strftime("%a, %B %d, %Y %H:%M:%S UTC") %>
                </div>
                <div class="hcLeft">
                    Server Time:</div>
            </div>
            <div>
                <div class="hcRight">
                    <script language="JavaScript" type="text/javascript">
                        document.write(new Date());
                    </script>
                </div>
                <div class="hcLeft">
                    Client Time:</div>
            </div>
            <div>
                <div class="hcRight">
                    <script language="JavaScript" type="text/javascript">
                        document.write("" + navigator.userAgent);
                    </script>
                </div>
                <div class="hcLeft">
                    User Agent:</div>
            </div>
            <br clear="all" />
        </div>
        <!-- close HEADER -->
        <div>
            <div class="content">
                <h1>
                    AT&amp;T Sample Advertisement Application - Get Advertisement Application</h1>
                <h2>
                    Feature 1: Get Advertisement</h2>
            </div>
        </div>
        <br />
        <br />
		<form method="post" action="/GetAds" name="getAds">
			<div class="extra">
				<table border="0" width="100%">
					<tbody>
						<tr>
							<td width="10%" class="label" title="Zip/Postal code of a user. For US only. (Integer)">
								Zip Code:
							</td>
							<td class="cell">
								<input type="text" name="zipCode" id="zipcode" />
							</td>
						</tr>
						<tr>
						</tr>
						<tr>
							<td width="10%" class="label" title="User location latitude value (in degrees).">
								Country:
							</td>
							<td class="cell">
								<input type="text" name="Country" id="country" />
							</td>
						</tr>
						<tr>
						</tr>
						<tr>
						</tr>
						<tr>
							<td width="10%" class="label">
								Over 18 Ad Content:
							</td>
							<td class="cell">
								<select name="Over18" id="over18">
                                    <option value=""></option>
                                    <option value="0" <% if params[:Over18] == "0" %>selected="selected"<% end %>>Deny Over 18 Content</option>
                                    <option value="2" <% if params[:Over18] == "2" %>selected="selected"<% end %>>Only Over 18 Content</option>
                                    <option value="3" <% if params[:Over18] == "3" %>selected="selected"<% end %>>Allow All Ads</option>
                                </select>
							</td>
						</tr>
					</tbody>
				</table>
				<br />
				<table>
					<tbody>
						<div id="extraleft">
							<div class="warning">
								<strong>Note:</strong><br />
								All Parameters are optional except Category.<br />
								If this application is accessed from desktop browser, 
								you may see successful response without Ads (HTTP 204).
							</div>
						</div>
					</tbody>
				</table>
			</div>
			<div class="navigation">
				<table border="0" width="100%">
					<tbody>
						<tr>
							<td width="10%" class="label">
								*Category:
							</td>
							<td class="cell">
								<select name="Category" id="category">
                                    <option value="auto" <% if params[:Category] == "auto" %>selected="selected"<% end %>>auto</option>
									<option value="business" <% if params[:Category] == "business" %>selected="selected"<% end %>>business</option>
									<option value="chat" <% if params[:Category] == "chat" %>selected="selected"<% end %>>chat</option>
									<option value="communication" <% if params[:Category] == "communication" %>selected="selected"<% end %>>communication</option>
									<option value="community" <% if params[:Category] == "community" %>selected="selected"<% end %>>community</option>
									<option value="entertainment" <% if params[:Category] == "entertainment" %>selected="selected"<% end %>>entertainment</option>
									<option value="finance" <% if params[:Category] == "finance" %>selected="selected"<% end %>>finance</option>
									<option value="games" <% if params[:Category] == "games" %>selected="selected"<% end %>>games</option>
									<option value="health" <% if params[:Category] == "health" %>selected="selected"<% end %>>health</option>
									<option value="local" <% if params[:Category] == "local" %>selected="selected"<% end %>>local</option>
									<option value="maps"<% if params[:Category] == "maps" %>selected="selected"<% end %>>maps</option>
									<option value="medical" <% if params[:Category] == "medical" %>selected="selected"<% end %>>medical</option>
									<option value="movies" <% if params[:Category] == "movies" %>selected="selected"<% end %>>movies</option>
									<option value="music" <% if params[:Category] == "music" %>selected="selected"<% end %>>music</option>
									<option value="news" <% if params[:Category] == "news" %>selected="selected"<% end %>>news</option>
									<option value="other" <% if params[:Category] == "other" %>selected="selected"<% end %>>other</option>
									<option value="personals" <% if params[:Category] == "personals" %>selected="selected"<% end %>>personals</option>
									<option value="photos" <% if params[:Category] == "photos" %>selected="selected"<% end %>>photos</option>
									<option value="shopping" <% if params[:Category] == "shopping" %>selected="selected"<% end %>>shopping</option>
									<option value="social" <% if params[:Category] == "social" %>selected="selected"<% end %>>social</option>
									<option value="sports" <% if params[:Category] == "sports" %>selected="selected"<% end %>>sports</option>
									<option value="technology" <% if params[:Category] == "technology" %>selected="selected"<% end %>>technology</option>
									<option value="tools" <% if params[:Category] == "tools" %>selected="selected"<% end %>>tools</option>
									<option value="travel" <% if params[:Category] == "travel" %>selected="selected"<% end %>>travel</option>
									<option value="tv" <% if params[:Category] == "tv" %>selected="selected"<% end %>>tv</option>
									<option value="video" <% if params[:Category] == "video" %>selected="selected"<% end %>>video</option>
									<option value="weather" <% if params[:Category] == "weather" %>selected="selected"<% end %>>weather</option>
                                </select>
							</td>
							<td width="10%" class="label" title="MMA Size in pixels">
								MMA Size:
							</td>
							<td class="cell">
								<select name="MMASize" id="mmasize">
									<option value=""></option>
									<option value="120 x 20" <% if params[:MMASize] == "120 x 20" %>selected="selected"<% end %>>120 x 20</option>
									<option value="168 x 28" <% if params[:MMASize] == "168 x 28" %>selected="selected"<% end %>>168 x 28</option>
									<option value="216 x 36" <% if params[:MMASize] == "168 x 28" %>selected="selected"<% end %>>216 x 36</option>
									<option value="300 x 50" <% if params[:MMASize] == "300 x 50" %>selected="selected"<% end %>>300 x 50</option>
									<option value="300 x 250" <% if params[:MMASize] == "300 x 250" %>selected="selected"<% end %>>300 x 250</option>
									<option value="320 x 50" <% if params[:MMASize] == "320 x 50" %>selected="selected"<% end %>>320 x 50</option>
								</select>
							</td>
						</tr>
						<tr>
							<td width="10%" class="label" title="The City of the user. For US only.">
								City:
							</td>
							<td class="cell">
								<input type="text" name="City" id="city" />
							</td>
							<td width="10%" class="label" title="Area code of a user. For US only. (Integer)">
								Area Code:
							</td>
							<td class="cell">
								<input type="text" name="areaCode" id="areacode" />
							</td>
						</tr>
						<tr>
							<td width="10%" class="label" title="Country of user. An ISO 3166 code to be used for specifying a country code.">
								Latitude:
							</td>
							<td class="cell">
								<input type="text" name="Latitude" id="latitude" />
							</td>
							<td width="10%" class="label" title="User location longitude value (in degrees).">
								Longitude:
							</td>
							<td class="cell">
								<input type="text" name="Longitude" id="longitude" />
							</td>
						</tr>
						<tr>
						</tr>
						<tr>
							<td width="10%" class="label">
								Age Group:
							</td>
							<td class="cell">
								<select name="AgeGroup" id="agegroup">
                                    <option value=""></option>
                                    <option value="1-13" <% if params[:AgeGroup] == "1-13" %>selected="selected"<% end %>>1-13</option>
                                    <option value="14-25" <% if params[:AgeGroup] == "14-25" %>selected="selected"<% end %>>14-25</option>
                                    <option value="26-35" <% if params[:AgeGroup] == "26-35" %>selected="selected"<% end %>>26-35</option>
                                    <option value="36-55" <% if params[:AgeGroup] == "36-55" %>selected="selected"<% end %>>36-55</option>
                                    <option value="55-100" <% if params[:AgeGroup] == "55-100" %>selected="selected"<% end %>>55-100</option>
                                </select>
							</td>
							<td width="10%" class="label">
								Premium:
							</td>
							<td class="cell">
								<select name="Premium" id="premium">
                                    <option value="" ></option>
                                    <option value="0" <% if params[:Premium] == "0" %>selected="selected"<% end %>>Non Premium</option>
                                    <option value="1" <% if params[:Premium] == "1" %>selected="selected"<% end %>>Premium Only</option>
                                    <option value="2" <% if params[:Premium] == "2" %>selected="selected"<% end %>>Both</option>
                                </select>
							</td>
						</tr>
						<tr>
						</tr>
						<tr>
						</tr>
						<tr>
							<td width="10%" class="label">
								Gender:
							</td>
							<td class="cell">
								<select name ="Gender" id="gender">
                                    <option value=""></option>
                                    <option value="M" <% if params[:Gender] == "M" %>selected="selected"<% end %>>Male</option>
                                    <option value="F" <% if params[:Gender] == "F" %>selected="selected"<% end %>> Female</option>
                                </select>
							</td>
							<td width="10%" class="label" title="Filter ads by keywords (delimited by commas Ex: music,singer)">
								Keywords:
							</td>
							<td class="cell">
								<input type="text" name="Keywords" id="keywords" />
							</td>
						</tr>
						<tr>
						</tr>
					</tbody>
				</table>
				<br />
				<table border="0" width="100%">
					<tbody>
						<tr valign="middle" align="right">
							<td class="cell" width="35%">
								<button type="submit" name="btnGetAds">
									Get Advertisement</button>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</form>

		<% if @no_ads %>
			<div style="text-align: left">
            	<br style="clear: both;"/>
					<table class="successWide" align="center" style="font-family:Sans-serif;font-size:9pt;">
                    	<tr>
                        	<td style="font-weight:bold;width:20%;">Success:</td>
                    	</tr>
						<tbody>
                    		<tr align="center">
                       			<td class="cell" align="left">
                           			<%= @no_ads %>
								</td>
                    		</tr>
                		</tbody>
            	</table>
        	</div>
		<% end %>

		<% if @result %>
		<div style="text-align: left">
            <br style="clear: both;"/>
				<table class="successWide" align="center" style="font-family:Sans-serif;font-size:9pt;">
                    <tr>
                        <td style="font-weight:bold;width:20%;">Success:</td>
                    </tr>
					<tbody>
					<% if @result['AdsResponse']['Ads']['Type'] %>
                    <tr align="center">
                        <td width="30%" class="label" align="right">
                            Type:
                        </td>
                        <td class="cell" align="left">
                            <%= @result['AdsResponse']['Ads']['Type'] %>
                        </td>
                    </tr>
					<% end %>
					<% if @result['AdsResponse']['Ads']['ClickUrl'] %>
                    <tr align="center">
                        <td width="30%" class="label" align="right">
                            ClickUrl:
                        </td>
                        <td class="cell" align="left">
                            <%= @result['AdsResponse']['Ads']['ClickUrl'] %>
                        </td>
                    </tr>
					<% end %>
					
                    <% if @result['AdsResponse']['Ads']['Type'] == "image" %>
                    <tr align="center">
                        <td width="30%" class="label" align="right">
                            ImageUrl.Image:
                        </td>
                        <td class="cell" align="left">
                            <%= @result['AdsResponse']['Ads']['ImageUrl']['Image'] %>   
                        </td>
                    </tr>
                       <% elsif @result['AdsResponse']['Ads']['Type'] == "text" %>
                    <tr align="center">
                        <td width="30%" class="label" align="right">
                            Text:
                        </td>
                        <td class="cell" align="left">
                            <%= @result['AdsResponse']['Ads']['Text'] %>
                        </td>
                    </tr>
                    <% end %>
		
		<% if @result['AdsResponse']['Ads']['Type'] == "image" %>
            <br style="clear: both;" />
                <div align="center">
                    <img src=" <%= @result['AdsResponse']['Ads']['ImageUrl']['Image'] %>" alt ="" /></a>
                </div>
        <% end %>
		
		<% if @result['AdsResponse']['Ads']['Type'] == "thirdparty" %>
				<tr align="center">
						<% if @result['AdsResponse']['Ads']['TrackUrl'] != nil %>
							<td width="30%" class="label" align="right">
								TrackUrl:
							</td>
							<td class="cell" align="left">
								<%= @result['AdsResponse']['Ads']['TrackUrl'] %>
							</td>
						</tr>
						<% end %>
						<% if @result['AdsResponse']['Ads']['Text'] != "" %>
						<tr align="center">
							<td width="30%" class="label" align="right">
								Text:
							</td>
							<td class="cell" align="left">
								<%= @result['AdsResponse']['Ads']['Text'] %>
							</td>
						</tr>
						<% end %>
					</tbody>
				</table>
			</div>
		<% end %>
		
		<% if @result['AdsResponse']['Ads']['Content'] %>
            <br style="clear: both;" />
                <div align="center">
                    <%= @result['AdsResponse']['Ads']['Content'] %>
                </div>
        <% end %>
		<% end %>
		

		<% if @error %>
			<br style="clear: both;" />
				<div align="center">
				<div id="statusPanel" style="font-family:Calibri;font-size:XX-Small;">
					<table class="errorWide" style="font-family:Sans-serif;font-size:9pt;">
						<tr>
							<td style="font-weight:bold;">ERROR:</td>
							</tr><tr>
							<td>Please correct the following error(s):
								<ul>
									<% @invalidParams.each do |print| %> 
										<li><%= print %></li>
									<% end %>
								</ul>
							</td>
						</tr>
					</table>
				</div>
			</div>
		<% end %>
		
		<% if @error_gateway %>
			<br style="clear: both;" />
				<div align="center">
				<div id="statusPanel" style="font-family:Calibri;font-size:XX-Small;">
					<table class="errorWide" style="font-family:Sans-serif;font-size:9pt;">
						<tr>
							<td style="font-weight:bold;">ERROR:</td>
							</tr><tr>
							<td>
								<%= @error_gateway %>
							</td>
						</tr>
					</table>
				</div>
			</div>
		<% end %>
		
        <br clear="all" />
        <div id="footer" align="center">
            <div style="float: right; width: 20%; font-size: 9px; text-align: right">
                Powered by AT&amp;T Cloud Architecture</div>
            <p>
                © 2012 AT&amp;T Intellectual Property. All rights reserved. <a href="http://developer.att.com/"
                    target="_blank">http://developer.att.com</a>
                <br />
                The Application hosted on this site are working examples intended to be used for
                reference in creating products to consume AT&amp;T Services and not meant to be
                used as part of your product. The data in these pages is for test purposes only
                and intended only for use as a reference in how the services perform.
                <br />
                For download of tools and documentation, please go to <a href="https://devconnect-api.att.com/"
                    target="_blank">https://devconnect-api.att.com</a>
                <br />
                For more information contact <a href="mailto:developer.support@att.com">developer.support@att.com</a>
            </p>
        </div>
    </div>
</body>
</html>